@model APIDemoViewModel

@{
    ViewBag.Title = "API Demo";
}

<div class="d-flex flex-column" style="flex: 1 1 auto">
    <ul class="nav nav-tabs" role="tablist" style="flex: 0 0 auto">
        <li class="nav-item">
            <a class="nav-link active" id="sample-api-tab" data-toggle="tab"
               href="#sample-api" role="tab">Sample API</a>
        </li>
    </ul>
    <div class="tab-content p-1 d-flex flex-column" style="flex: 1 1 auto">
        <br  style="flex: 0 0 auto" />
        <div class="tab-pane fade show active" id="sample-api" role="tabpanel" style="flex: 1 1 auto">
            @Html.Partial("~/Views/APIDemo/SampleAPI.cshtml", Model)
        </div>
    </div>
</div>

@section scripts {
    <script type="text/javascript" defer="defer">
        function runAsyncTest(btn) {
            const $btn = $(btn),
                $input = $(btn.parentNode.parentNode).find('input'),
                taskCount = $input.val();

            showLoading();
            $.post('@Url.Action(nameof(APIDemoController.AsyncTest), "APIDemo")', { numberOfTasks: taskCount }, data => {
                $('#txtAsyncTestResults').prop('rows', taskCount).text(data);
                hideLoading();
            });
        }
    </script>    
}